\input{estilo.tex}
\usepackage{textcomp}
\usepackage{hyperref}

%----------------------------------------------------------------------------------------
%	DATOS
%----------------------------------------------------------------------------------------

\newcommand{\myName}{Francisco Javier Bolívar Lupiáñez}
\newcommand{\myDegree}{Máster en Ingeniería Informática}
\newcommand{\myFaculty}{E. T. S. de Ingenierías Informática y de Telecomunicación}
\newcommand{\myDepartment}{Ciencias de la Computación e Inteligencia Artificial}
\newcommand{\myUniversity}{\protect{Universidad de Granada}}
\newcommand{\myLocation}{Granada}
\newcommand{\myTime}{\today}
\newcommand{\myTitle}{Práctica 4}
\newcommand{\mySubtitle}{Computación Distribuida y Escalable con Hadoop}
\newcommand{\mySubject}{Cloud Computing: Servicios y Aplicaciones}
\newcommand{\myYear}{2016-2017}

%----------------------------------------------------------------------------------------
%	PORTADA
%----------------------------------------------------------------------------------------


\title{	
	\normalfont \normalsize 
	\textsc{\textbf{\mySubject \space (\myYear)} \\ \myDepartment} \\[20pt] % Your university, school and/or department name(s)
	\textsc{\myDegree \\[10pt] \myFaculty \\ \myUniversity} \\[25pt]
	\horrule{0.5pt} \\[0.4cm] % Thin top horizontal rule
	\huge \myTitle: \mySubtitle \\ % The assignment title
	\horrule{2pt} \\[0.5cm] % Thick bottom horizontal rule
	\normalfont \normalsize
}

\author{\myName} % Nombre y apellidos

\date{\myTime} % Incluye la fecha actual
%----------------------------------------------------------------------------------------
%	INDICE
%----------------------------------------------------------------------------------------

\begin{document}
	
\lstset {
	basicstyle=\scriptsize,
	frame=single,
	backgroundcolor=\color{grey},
	breaklines=true
}
	
\setcounter{page}{0}

\maketitle % Muestra el Título
\thispagestyle{empty}

\newpage %inserta un salto de página

\tableofcontents % para generar el índice de contenidos

%\listoffigures

\newpage

%----------------------------------------------------------------------------------------
%	DOCUMENTO
%----------------------------------------------------------------------------------------

\section{Introducción}

El objetivo de esta práctica es realizar programas escalables para mejorar la eficiencia en entornos Big Data. Para ello, haremos uso del entorno que se ha convertido en un estándar de facto como es Hadoop, utilizando HDFS como sistema de archivos distribuido y Hadoop-MapReduce como mecanismo de ejecución.
\\ \\
Para constatar el manejo de la herramienta anterior, el alumno deberá las realizar tareas que se describen a continuación y entregar documentación describiendo las tareas realizadas.

\section{Tareas}

Utilizando como base el conjunto de datos ECBDL14 situado en la carpeta \texttt{/tmp/BDCC/} \texttt{datasets/EDBDL14/ECBDL14\_10tst.data} obtener los siguientes datos estadísticos descriptivos.

\subsection{Tarea 1}

Calcular el valor mínimo de la variable (columna) 5:
\\ \\
El código está en la carpeta \texttt{Min}.
\\ \\
Salida:

\begin{lstlisting}
Min -11.0
\end{lstlisting}

\subsection{Tarea 2}

Calcular el valor máximo de la variable (columna) 5:
\\ \\
El código está en la carpeta \texttt{Max}.
\\ \\
Salida:

\begin{lstlisting}
Max 9.0
\end{lstlisting}

\subsection{Tarea 3}

Calcular al mismo tiempo los valores máximo y mínimo de la variable 5:
\\ \\
El código está en la carpeta \texttt{MaxMin}.
\\ \\
Salida:

\begin{lstlisting}
Max 9.0
Min -11.0
\end{lstlisting}

\subsection{Tarea 4}

Calcula los valores máximo y mínimo de todas las variables (salvo la última, que es la etiqueta de clase):
\\ \\
El código está en la carpeta \texttt{MaxMinAll}.
\\ \\
Salida:

\begin{lstlisting}
Max (1) 0.154
Min (1) 0.0
Max (2) 10.0
Min (2) -12.0
Max (3) 8.0
Min (3) -11.0
Max (4) 9.0
Min (4) -12.0
Max (5) 9.0
Min (5) -11.0
Max (6) 9.0
Min (6) -13.0
Max (7) 9.0
Min (7) -12.0
Max (8) 7.0
Min (8) -12.0
Max (9) 10.0
Min (9) -13.0
Max (0) 0.768
Min (0) 0.094
\end{lstlisting}

\subsection{Tarea 5}

Realizar la media de la variable 5:
\\ \\
El código está en la carpeta \texttt{Avg}.
\\ \\
Salida:

\begin{lstlisting}
Avg -1.282261707288373
\end{lstlisting}

\subsection{Tarea 6}

Obtener la media de todas las variables (salvo la clase):
\\ \\
El código está en la carpeta \texttt{AvgAll}.
\\ \\
Salida:

\begin{lstlisting}
1   0.05212776590940497
2   -2.188240380935686
3   -1.408876789776933
4   -1.7528724942777865
5   -1.282261707288373
6   -2.293434905140485
7   -1.5875789403216172
8   -1.7390052924221087
9   -1.6989002790625127
0   0.25496195991730947
\end{lstlisting}

\subsection{Tarea 7}

Comprobar si el conjunto de datos ECBDL es balanceado o no balanceado, es decir, que el ratio entre las clases sea menor o mayor que 1.5 respectivamente:
\\ \\
El código está en la carpeta \texttt{Bal}.
\\ \\
Salida:

\begin{lstlisting}
Bal 58.582560602010815
\end{lstlisting}

Al ser el ratio mayor a 1.5 podemos determinar que el conjunto de datos no es balanceado.

\subsection{Tarea 8}

Cálculo del coeficiente de correlación entre todas las parejas de variables:
\\ \\
El código está en la carpeta \texttt{Corr}.
\\ \\
Salida:

\begin{lstlisting}
4,9     0.014041854998880898
5,8     0.015183324110128226
6,7     0.11488805268078417
5,9     0.023068393377281653
6,8     0.07783431570283235
6,9     0.1071360896407867
7,8     -0.3292179447994215
7,9     0.08936167755929571
0,1     -0.1358991685730606
8,9     0.1084960047958963
0,2     0.0914359311113205
0,3     0.07005931836756214
1,2     -0.00303645395909211
0,4     0.047429178218921314
1,3     0.009438349449411037
0,5     0.12916572714016025
1,4     0.058856701884543665
2,3     -0.01726247486762999
0,6     0.19252517589623233
1,5     0.01465997764996687
2,4     0.018191261366109063
0,7     0.17921266563172591
1,6     -0.031832553335934606
2,5     0.024182999250758484
3,4     0.015754379166559307
0,8     0.06624560108430694
1,7     -1.7503641942540156E-5
2,6     0.041153841377462724
3,5     0.016128930425374947
0,9     0.1382708996433742
1,8     0.015894103460601654
2,7     0.03814283037771738
3,6     0.025952003813569456
4,5     0.07125079800784533
1,9     -0.016730623442584823
2,8     0.025077384911599235
3,7     0.01879122854336587
4,6     0.018264386288745375
2,9     0.027549270387458427
3,8     0.016130402799924542
4,7     0.01984291578033614
5,6     0.03200113594875155
3,9     0.01817123896585364
4,8     0.01224584385595619
5,7     0.03297998768398484
\end{lstlisting}

\section{Tareas adicionales}

\subsection{Tarea 1}

Parametrizar la columna sobre la que se quiere calcular el estadístico:

\subsubsection{Mínimo}

El código está en la carpeta \texttt{MinPar}.
\\ \\
Salida:

\begin{lstlisting}
6   -13.0
\end{lstlisting}

\subsubsection{Máximo}

El código está en la carpeta \texttt{MaxPar}.
\\ \\
Salida:

\begin{lstlisting}
6   9.0
\end{lstlisting}

\subsubsection{Media}

El código está en la carpeta \texttt{AvgPar}.
\\ \\
Salida:

\begin{lstlisting}
6   -2.293434905140485
\end{lstlisting}

\subsection{Tarea 2}

Combinar el cálculo de todos los estadísticos en una única función:
\\ \\
El código está en la carpeta \texttt{StatPar}.
\\ \\
Salida:

\begin{lstlisting}
Max (6) 9.0
Min (6) -13.0
Avg (6) -2.293434905140485
\end{lstlisting}

\subsection{Tarea 3}

Calcular los estadísticos sobre todas las columnas:
\\ \\
El código está en la carpeta \texttt{StatAll}.
\\ \\
Salida:

\begin{lstlisting}
Max (1) 0.154
Min (1) 0.0
Avg (1) 0.05212776590930481
Max (2) 10.0
Min (2) -12.0
Avg (2) -2.188240380935686
Max (3) 8.0
Min (3) -11.0
Avg (3) -1.408876789776933
Max (4) 9.0
Min (4) -12.0
Avg (4) -1.7528724942777865
Max (5) 9.0
Min (5) -11.0
Avg (5) -1.282261707288373
Max (6) 9.0
Min (6) -13.0
Avg (6) -2.293434905140485
Max (7) 9.0
Min (7) -12.0
Avg (7) -1.5875789403216172
Max (8) 7.0
Min (8) -12.0
Avg (8) -1.7390052924221087
Max (9) 10.0
Min (9) -13.0
Avg (9) -1.6989002790625127
Max (0) 0.768
Min (0) 0.094
Avg (0) 0.2549619599173307
\end{lstlisting}

\subsection{Tarea 4}

Repite el proceso sobre un conjunto de mayor volumen (Ej: \texttt{/user/isaac/datasets/} \texttt{higgs...}) ¿Hay grandes diferencias de tiempo?:
\\ \\
Para el conjunto de datos ECBDL14 que cuenta con, aproximadamente, 3.000.000 de filas obtenemos los siguientes tiempos:
\\ \\
$ t_{map} = 10s $
\\
$ t_{reduce} = 9s $
\\
$ t_{total} = 19s $
\\ \\
Para el conjunto de datos de HiggsImg10 que cuenta con, aproximadamente, 500.000 de filas obtenemos los siguientes tiempos:
\\ \\
$ t_{map} = 6s $
\\
$ t_{reduce} = 8s $
\\
$ t_{total} = 14s $
\\ \\
En teoría, al ser el segundo conjunto de datos seis veces menor, el tiempo debería ser seis veces menor, no obstante no es así. El tiempo del map se ve reducido en un 40\% mientras que el del reduce solo en un 12\% aproximadamente. Por lo que el tiempo no es lineal ya que depende del número de mappers y reducers que se lancen.

\subsection{Tarea 5}

Acelera el proceso de cómputo descargando al Reducer de parte de la tarea:
\\ \\
El código está en la carpeta \texttt{MinOpt} y se ha hecho uso de \texttt{cleanup} para el cálculo de mínimos parciales en el map.
\\ \\
Salida:

\begin{lstlisting}
Min -11.0
\end{lstlisting}

El tiempo para el cálculo del mínimo original es, como se ha visto en el ejercicio anterior de 19 segundos. Con el uso de \texttt{cleanup} en el map se ve reducido a los 16 segundos.

%----------------------------------------------------------------------------------------
%	REFERENCIAS
%----------------------------------------------------------------------------------------

%\newpage

%\bibliography{referencias} %archivo referencias.bib que contiene las entradas 
%\bibliographystyle{plain} % hay varias formas de citar

\end{document}